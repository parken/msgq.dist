{"version":3,"sources":["components/oauth/express/authorise.js"],"names":["req","res","findOne","where","clientId","query","client_id","redirectUri","redirect_uri","attributes","then","model","status","json","error","catch","err"],"mappings":";;;;;;kBAGe,UAAUA,GAAV,EAAeC,GAAf,EAAoB;AACjC,SAAO,WACJC,OADI,CACI;AACPC,WAAO;AACLC,gBAAUJ,IAAIK,KAAJ,CAAUC,SADf;AAELC,mBAAaP,IAAIK,KAAJ,CAAUG;AAFlB,KADA;AAKPC,gBAAY,CAAC,IAAD,EAAO,MAAP;AALL,GADJ,EAQJC,IARI,CAQC,UAACC,KAAD,EAAW;AACf,QAAI,CAACA,KAAL,EAAY,OAAOV,IAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,OAAO,gBAAT,EAArB,CAAP;AACZ,WAAOb,IAAIY,IAAJ,CAASF,KAAT,CAAP;AACD,GAXI,EAYJI,KAZI,CAYE;AAAA,WAAOd,IAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,GAArB,CAAP;AAAA,GAZF,CAAP;AAaD,C;;AAhBD","file":"authorise.js","sourcesContent":["\nimport { App } from '../../../conn/sqldb';\n\nexport default function (req, res) {\n  return App\n    .findOne({\n      where: {\n        clientId: req.query.client_id,\n        redirectUri: req.query.redirect_uri,\n      },\n      attributes: ['id', 'name'],\n    })\n    .then((model) => {\n      if (!model) return res.status(404).json({ error: 'Invalid Client' });\n      return res.json(model);\n    })\n    .catch(err => res.status(400).json(err));\n}\n"]}