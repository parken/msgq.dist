{"version":3,"sources":["components/oauth/sequelize/accessToken.model.js"],"names":["moment","require","module","exports","AccessTokenModel","sequelize","DataTypes","AccessToken","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","unique","accessToken","STRING","validate","len","args","msg","expires","DATE","defaultValue","setExpires","add","tableName","timestamps","classMethods","associate","db","belongsTo","App","foreignKey","Session","User"],"mappings":";;AAEA,IAAMA,SAASC,QAAQ,QAAR,CAAf;;AAEAC,OAAOC,OAAP,GAAiB,SAASC,gBAAT,CAA0BC,SAA1B,EAAqCC,SAArC,EAAgD;AAC/D,MAAMC,cAAcF,UAAUG,MAAV,CAAiB,aAAjB,EAAgC;AAClDC,QAAI;AACFC,YAAMJ,UAAUK,OAAV,CAAkB,EAAlB,CADJ;AAEFC,qBAAe,IAFb;AAGFC,kBAAY,IAHV;AAIFC,iBAAW,KAJT;AAKFC,cAAQ;AALN,KAD8C;AAQlDC,iBAAa;AACXN,YAAMJ,UAAUW,MAAV,CAAiB,GAAjB,CADK;AAEXC,gBAAU;AACRC,aAAK;AACHC,gBAAM,CAAC,EAAD,EAAK,GAAL,CADH;AAEHC,eAAK;AAFF;AADG,OAFC;AAQXP,iBAAW;AARA,KARqC;AAkBlDQ,aAAS;AACPZ,YAAMJ,UAAUiB,IADT;AAEPT,iBAAW,KAFJ;AAGPU,oBAAc,SAASC,UAAT,GAAsB;AAClC,eAAOzB,SAAS0B,GAAT,CAAa,CAAb,EAAgB,OAAhB,CAAP;AACD;AALM;AAlByC,GAAhC,EAyBjB;AACDC,eAAW,eADV;AAEDC,gBAAY,IAFX;;AAIDC,kBAAc;AACZC,eADY,qBACFC,EADE,EACE;AACZxB,oBAAYyB,SAAZ,CAAsBD,GAAGE,GAAzB,EAA8B;AAC5BC,sBAAY;AADgB,SAA9B;;AAIA3B,oBAAYyB,SAAZ,CAAsBD,GAAGI,OAAzB,EAAkC;AAChCD,sBAAY;AADoB,SAAlC;;AAIA3B,oBAAYyB,SAAZ,CAAsBD,GAAGK,IAAzB,EAA+B;AAC7BF,sBAAY;AADiB,SAA/B;AAGD;AAbW;AAJb,GAzBiB,CAApB;;AA8CA,SAAO3B,WAAP;AACD,CAhDD","file":"accessToken.model.js","sourcesContent":["\n\nconst moment = require('moment');\n\nmodule.exports = function AccessTokenModel(sequelize, DataTypes) {\n  const AccessToken = sequelize.define('AccessToken', {\n    id: {\n      type: DataTypes.INTEGER(14),\n      autoIncrement: true,\n      primaryKey: true,\n      allowNull: false,\n      unique: true,\n    },\n    accessToken: {\n      type: DataTypes.STRING(256),\n      validate: {\n        len: {\n          args: [10, 256],\n          msg: 'Maximum length for value field is 255',\n        },\n      },\n      allowNull: false,\n    },\n    expires: {\n      type: DataTypes.DATE,\n      allowNull: false,\n      defaultValue: function setExpires() {\n        return moment().add(1, 'hours');\n      },\n    },\n  }, {\n    tableName: 'access_tokens',\n    timestamps: true,\n\n    classMethods: {\n      associate(db) {\n        AccessToken.belongsTo(db.App, {\n          foreignKey: 'appId',\n        });\n\n        AccessToken.belongsTo(db.Session, {\n          foreignKey: 'sessionId',\n        });\n\n        AccessToken.belongsTo(db.User, {\n          foreignKey: 'userId',\n        });\n      },\n    },\n  });\n\n  return AccessToken;\n};\n"]}