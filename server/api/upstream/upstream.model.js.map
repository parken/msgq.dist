{"version":3,"sources":["api/upstream/upstream.model.js"],"names":["sequelize","DataTypes","Upstream","define","id","type","INTEGER","allowNull","primaryKey","autoIncrement","balance","name","STRING","provider","link","support","comment","active","BOOLEAN","routeId","default","parameter","routeMap","joinKey","method","tableName","timestamps","paranoid","scopes","classMethods","deactivateOtherRoutes","db","update","where","associate","belongsTo","User","foreignKey"],"mappings":";;;;;;kBAAe,UAAUA,SAAV,EAAqBC,SAArB,EAAgC;AAC7C,MAAMC,WAAWF,UAAUG,MAAV,CAAiB,UAAjB,EAA6B;AAC5CC,QAAI;AACFC,YAAMJ,UAAUK,OADd;AAEFC,iBAAW,KAFT;AAGFC,kBAAY,IAHV;AAIFC,qBAAe;AAJb,KADwC;AAO5CC,aAAST,UAAUK,OAPyB;AAQ5CK,UAAMV,UAAUW,MAR4B;AAS5CC,cAAUZ,UAAUW,MATwB;AAU5CE,UAAMb,UAAUW,MAV4B;AAW5CG,aAASd,UAAUW,MAXyB;AAY5CI,aAASf,UAAUW,MAZyB;AAa5CK,YAAQhB,UAAUiB,OAb0B;AAc5CC,aAASlB,UAAUW,MAdyB;AAe5CQ,aAASnB,UAAUW,MAfyB;AAgB5CS,eAAWpB,UAAUW,MAhBuB;AAiB5CU,cAAUrB,UAAUW,MAjBwB;AAkB5CW,aAAStB,UAAUW,MAlByB;AAmB5CY,YAAQvB,UAAUW;AAnB0B,GAA7B,EAoBd;AACDa,eAAW,WADV;AAEDC,gBAAY,IAFX;AAGDC,cAAU,IAHT;AAIDC,YAAQ;AACNX,cAAQ;AACNA,gBAAQ;AADF;AADF,KAJP;AASDY,kBAAc;AACZC,2BADY,iCACUC,EADV,QAC2B;AAAA,YAAXZ,OAAW,QAAXA,OAAW;;AACrC,eAAOY,GAAG7B,QAAH,CAAY8B,MAAZ,CAAmB,EAAEf,QAAQ,KAAV,EAAnB,EAAsC,EAAEgB,OAAO,EAAEd,gBAAF,EAAT,EAAtC,CAAP;AACD,OAHW;AAIZe,eAJY,qBAIFH,EAJE,EAIE;AACZ7B,iBAASiC,SAAT,CAAmBJ,GAAGK,IAAtB,EAA4B;AAC1BC,sBAAY,WADc;AAE1B9B,qBAAW;AAFe,SAA5B;AAIAL,iBAASiC,SAAT,CAAmBJ,GAAGK,IAAtB,EAA4B;AAC1BC,sBAAY,WADc;AAE1B9B,qBAAW;AAFe,SAA5B;AAID;AAbW;AATb,GApBc,CAAjB;;AA8CA,SAAOL,QAAP;AACD,C","file":"upstream.model.js","sourcesContent":["export default function (sequelize, DataTypes) {\n  const Upstream = sequelize.define('Upstream', {\n    id: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true,\n      autoIncrement: true,\n    },\n    balance: DataTypes.INTEGER,\n    name: DataTypes.STRING,\n    provider: DataTypes.STRING,\n    link: DataTypes.STRING,\n    support: DataTypes.STRING,\n    comment: DataTypes.STRING,\n    active: DataTypes.BOOLEAN,\n    routeId: DataTypes.STRING,\n    default: DataTypes.STRING,\n    parameter: DataTypes.STRING,\n    routeMap: DataTypes.STRING,\n    joinKey: DataTypes.STRING,\n    method: DataTypes.STRING,\n  }, {\n    tableName: 'upstreams',\n    timestamps: true,\n    paranoid: true,\n    scopes: {\n      active: {\n        active: true,\n      },\n    },\n    classMethods: {\n      deactivateOtherRoutes(db, { routeId }) {\n        return db.Upstream.update({ active: false }, { where: { routeId } });\n      },\n      associate(db) {\n        Upstream.belongsTo(db.User, {\n          foreignKey: 'createdBy',\n          allowNull: false,\n        });\n        Upstream.belongsTo(db.User, {\n          foreignKey: 'updatedBy',\n          allowNull: false,\n        });\n      },\n    },\n  });\n\n  return Upstream;\n}\n"]}