{"version":3,"sources":["api/company/company.controller.js"],"names":["show","handleError","res","argStatusCode","err","error","statusCode","status","send","req","User","find","attributes","where","loginUrl","origin","then","company","json","message","catch"],"mappings":";;;;;QASgBA,I,GAAAA,I;;AAThB;;;;AACA;;;;;;AAEA,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,aAA1B,EAAyCC,GAAzC,EAA8C;AAC5C,mBAAOC,KAAP,CAAa,iBAAb,EAAgCD,GAAhC;AACA,MAAME,aAAaH,iBAAiB,GAApC;AACAD,MAAIK,MAAJ,CAAWD,UAAX,EAAuBE,IAAvB,CAA4BJ,GAA5B;AACD;;AAEM,SAASJ,IAAT,CAAcS,GAAd,EAAmBP,GAAnB,EAAwB;AAC7B,SAAO,gBAAGQ,IAAH,CACJC,IADI,CACC;AACJC,gBAAY,CACV,IADU,EAEV,CAAC,aAAD,EAAgB,MAAhB,CAFU,EAGV,CAAC,aAAD,EAAgB,MAAhB,CAHU,EAIV,aAJU,EAKV,eALU,EAMV,cANU,EAOV,UAPU,CADR;AAUJC,WAAO,EAAEC,UAAUL,IAAIM,MAAJ,IAAc,YAA1B;AAVH,GADD,EAaJC,IAbI,CAaC,UAACC,OAAD,EAAa;AACjB,QAAI,CAACA,OAAL,EAAc,OAAOf,IAAIK,MAAJ,CAAW,GAAX,EAAgBW,IAAhB,CAAqB,EAAEC,SAAS,iBAAX,EAArB,CAAP;AACd,WAAOjB,IAAIgB,IAAJ,CAASD,OAAT,CAAP;AACD,GAhBI,EAiBJG,KAjBI,CAiBE;AAAA,WAAOnB,YAAYC,GAAZ,EAAiB,GAAjB,EAAsBE,GAAtB,CAAP;AAAA,GAjBF,CAAP;AAkBD","file":"company.controller.js","sourcesContent":["import logger from '../../components/logger';\nimport db from '../../conn/sqldb';\n\nfunction handleError(res, argStatusCode, err) {\n  logger.error('user.controller', err);\n  const statusCode = argStatusCode || 500;\n  res.status(statusCode).send(err);\n}\n\nexport function show(req, res) {\n  return db.User\n    .find({\n      attributes: [\n        'id',\n        ['companyName', 'name'],\n        ['companyLogo', 'logo'],\n        'supportName',\n        'supportMobile',\n        'supportEmail',\n        'loginUrl',\n      ],\n      where: { loginUrl: req.origin || 'msgque.com' },\n    })\n    .then((company) => {\n      if (!company) return res.status(404).json({ message: 'Invalid Request' });\n      return res.json(company);\n    })\n    .catch(err => handleError(res, 500, err));\n}\n"]}