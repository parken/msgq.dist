{"version":3,"sources":["conn/sqldb/index.js"],"names":["MYSQL_DB","MYSQL_USER","MYSQL_PASS","MYSQL_HOST","MYSQL_TZ","db","sequelize","host","dialect","timezone","seederStorage","supportBigNumbers","User","import","RefreshToken","AccessToken","App","AuthCode","Session","forEach","model","camelCase","modelName","associate","Sequelize"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;IAEQA,Q,yBAAAA,Q;IAAUC,U,yBAAAA,U;IAAYC,U,yBAAAA,U;IAAYC,U,yBAAAA,U;IAAYC,Q,yBAAAA,Q;;;AAEtD,IAAMC,KAAK;AACTC,aAAW,wBACTN,QADS,EAETC,UAFS,EAGTC,UAHS,EAIT,EAAEK,MAAMJ,UAAR;AACEK,aAAS,OADX;AAEEC,cAAUL,QAFZ;AAGEM,mBAAe,WAHjB;AAIEC,uBAAmB;AAJrB,GAJS;AADF,CAAX;;AAcAN,GAAGO,IAAH,GAAUP,GAAGC,SAAH,CAAaO,MAAb,CAAoB,2BAApB,CAAV;AACAR,GAAGS,YAAH,GAAkBT,GAAGC,SAAH,CAAaO,MAAb,CAAoB,qDAApB,CAAlB;AACAR,GAAGU,WAAH,GAAiBV,GAAGC,SAAH,CAAaO,MAAb,CAAoB,oDAApB,CAAjB;AACAR,GAAGW,GAAH,GAASX,GAAGC,SAAH,CAAaO,MAAb,CAAoB,4CAApB,CAAT;AACAR,GAAGY,QAAH,GAAcZ,GAAGC,SAAH,CAAaO,MAAb,CAAoB,iDAApB,CAAd;AACAR,GAAGa,OAAH,GAAab,GAAGC,SAAH,CAAaO,MAAb,CAAoB,gDAApB,CAAb;;AAEA,CACE,OADF,EACW,gBADX,EAC6B,UAD7B,EACyC,OADzC,EACkD,UADlD,EAC8D,iBAD9D,EACiF,SADjF,EAEE,eAFF,EAEmB,SAFnB,EAE8B,aAF9B,EAE6C,aAF7C,EAE4D,aAF5D,EAE2E,gBAF3E,EAGE,OAHF,EAGW,cAHX,EAG2B,UAH3B,EAGuC,UAHvC,EAGmD,YAHnD,EAGiE,SAHjE,EAG4E,SAH5E,EAIE,mBAJF,EAIuB,cAJvB,EAIuC,YAJvC,EAIqD,MAJrD,EAI6D,YAJ7D,EAI2E,QAJ3E,EAKEM,OALF,CAKU;AAAA,SACPd,GAAGe,KAAH,IAAYf,GAAGC,SAAH,CAAaO,MAAb,gBAAiC,iBAAEQ,SAAF,CAAYD,KAAZ,CAAjC,SAAuD,iBAAEC,SAAF,CAAYD,KAAZ,CAAvD,YADL;AAAA,CALV;;AAQA,yBAAef,EAAf;;AAEA,oBAAYA,EAAZ,EAAgBc,OAAhB,CAAwB,UAACG,SAAD,EAAe;AACrC,MAAI,eAAejB,GAAGiB,SAAH,CAAnB,EAAkC;AAChCjB,OAAGiB,SAAH,EAAcC,SAAd,CAAwBlB,EAAxB;AACD;AACF,CAJD;;AAMAA,GAAGmB,SAAH;;kBAEenB,E","file":"index.js","sourcesContent":["import _ from 'lodash';\nimport Sequelize from 'sequelize';\nimport config from '../../config/environment';\nimport oauthComponent from '../../components/oauth/sequelize';\n\nconst { MYSQL_DB, MYSQL_USER, MYSQL_PASS, MYSQL_HOST, MYSQL_TZ } = config;\n\nconst db = {\n  sequelize: new Sequelize(\n    MYSQL_DB,\n    MYSQL_USER,\n    MYSQL_PASS,\n    { host: MYSQL_HOST,\n      dialect: 'mysql',\n      timezone: MYSQL_TZ,\n      seederStorage: 'sequelize',\n      supportBigNumbers: true,\n    }\n  ),\n};\n\ndb.User = db.sequelize.import('../../api/user/user.model');\ndb.RefreshToken = db.sequelize.import('../../components/oauth/sequelize/refreshToken.model');\ndb.AccessToken = db.sequelize.import('../../components/oauth/sequelize/accessToken.model');\ndb.App = db.sequelize.import('../../components/oauth/sequelize/app.model');\ndb.AuthCode = db.sequelize.import('../../components/oauth/sequelize/authCode.model');\ndb.Session = db.sequelize.import('../../components/oauth/sequelize/session.model');\n\n[\n  'Group', 'SenderIdStatus', 'SenderId', 'Route', 'Upstream', 'LoginIdentifier', 'Contact',\n  'MessageStatus', 'Message', 'PackageType', 'UserPackage', 'Transaction', 'PriorityNumber',\n  'Group', 'GroupContact', 'Campaign', 'Template', 'MessageFly', 'Selling', 'Sending',\n  'TransactionStatus', 'UpstreamPlan', 'GroupEmail', 'Role', 'DomainType', 'Domain',\n].forEach(model =>\n  (db[model] = db.sequelize.import(`../../api/${_.camelCase(model)}/${_.camelCase(model)}.model`)));\n\noauthComponent(db);\n\nObject.keys(db).forEach((modelName) => {\n  if ('associate' in db[modelName]) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.Sequelize = Sequelize;\n\nexport default db;\n"]}